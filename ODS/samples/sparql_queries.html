<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SPARQL Queries using the SPARQL EndPoint :: TED Developer Documentation</title>
    <link rel="canonical" href="https://docs.ted.europa.eu/ODS/samples/sparql_queries.html">
    <meta name="generator" content="Antora 3.1.2">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/custom.css">
    <link rel="stylesheet" href="../../_/css/vendor/docsearch-2.6.3.css">
        <link rel="apple-touch-icon" sizes="180x180" href="../../_/img/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../_/img/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../_/img/icons/favicon-16x16.png">
    <link rel="manifest" href="../../_/img/icons/site.webmanifest">
    <link rel="mask-icon" href="../../_/img/icons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="../../_/img/icons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="../../_/img/icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <link rel="stylesheet" href="/styles/optional/custom.css" media="screen"/>
    <meta name="google-site-verification" content="9zNtA8Mxo6eMk-CIvQQbCvXFWjOoAHT6phYIK3saIV4" />
    <meta content="width=device-width,initial-scale=1" name="viewport" />
    <meta content="IE=edge" http-equiv="X-UA-Compatible" />
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js" crossorigin="anonymous"></script>
<script defer src="https://europa.eu/webtools/load.js?globan=1110" type="text/javascript"></script>
<div class="eu-flag">
    <nav class="navbar-scrollable">
        <div class="navbar-brand">

            <div class="eu-emblem" style="display: inline-block;">
                <!-- flag and logo-->
                <a href="https://european-union.europa.eu/index_en" target="_blank">
                    <div class="eu-emblem-std-en"><span></span>
                    </div>
                </a>

            </div>
        </div>
        <div class="sep-frame">
            <div class="rect-grey"></div>
        </div>
    </nav>

</div>

<div class="eu-tenders">
    <nav class="navbar">
        <div class="text-eu-tenders">
            <a href="https://ted.europa.eu/en/" target="_blank">EU tenders</a>
        </div>
        <div id="topbar-nav" class="navbar-menu">

            <div class="text-eu-subtext-text">
                <a href="/">TED Developer Docs</a>
            </div>
 <div class="text-eu-subtext-label">
                <a href="/">Documentation for TED developers and eSenders</a>
            </div>
            <div class="navbar-end">
                <div class="navbar-item search">
                    <input id="search-input" type="text" placeholder="Search docs">
                </div>
            </div>
        </div>
    </nav>
</div><div class="body">
<script src="../../_/js/07-scrollable-header-nav.js"></script>
<div class="nav-container" data-component="ODS" data-version="">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">TED Open Data Service</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><span class="separated"><strong>Querying TED Open Data</strong></span></span>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Querying TED Open data</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../querying/index.html">Home</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../querying/starting.html">Getting started</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../querying/online_training.html">Online training resources</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../querying/designing_query.html">Designing a query</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../querying/structure.html">SPARQL query structure</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../querying/notice_data.html">Notice data</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../querying/epo.html">eProcurement Ontology resources</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../querying/snippets.html">Reusable query snippets</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../querying/scenarios.html">Scenarios: question to query</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="index.html">Browse the sample queries</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><span class="separated"><strong>Connecting to TED Open Data</strong></span></span>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Connection Methods</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connecting/index.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connecting/sparql.html">Submitting a query in the Cellar SPARQL Endpoint</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connecting/excel.html">Connect using Excel</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../connecting/python.html">Connect using Jupyter Notebook and Python</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><span class="separated"><strong>Sample SPARQL Queries</strong></span></span>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Sample queries
To be added as they become available</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="query1.html">Query 1: Highest value contract on a date</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="query2.html">Query 2: METS packages published on a date</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="query3.html">Query 3: Query notice by id</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="query4.html">Query 4: Notices published on a date</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="query5.html">Query 5: Contracts won by SMEs / date &amp; country</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="query6.html">Query 6: Contractors using subcontractors/ date</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="query7.html">Query 7: Contract values on a date</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="query8.html">Query 8: Contract winners on a Date</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><span class="separated"><strong>Mapping XML data to RDF</strong></span></span>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Mappings and mapping suites</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mapping/index.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mapping/repository-structure.html">Repository structure</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mapping/mapping_how.html">Methodology</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mapping/mapping-suite-structure.html">Mapping suite package structure</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#preparing-test-data.adoc">Preparing test data samples</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mapping/toolchain.html">Toolchain</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mapping/reusing.html">Reusing mappings</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mapping/code-list-resources.html">Resources for mapping code lists</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mapping/glossary.html">Glossary of terms</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mapping/code-list-resources.html">Code list mappings</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mapping/prior.html">Recommended Prior Knowledge</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text"><span class="separated"><strong>Information and Resources</strong></span></span>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../data_availability.html">Current data availability</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://github.com/OP-TED/ted-rdf-docs">Ask the community for query help</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../mapping/versioning.html">Versioning</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
      <div class="context">
          <span class="title dim">Select a product/version</span>
          <span class="version">&nbsp;</span>
      </div>
  <ul class="components">
      <li class="component">
        <a class="title" href="../../eforms/latest/index.html">eForms SDK</a>
        <ul class="versions">
            <li class="version is-latest">
              <a href="../../eforms/latest/index.html">1.12</a>
            </li>
            <li class="version">
              <a href="../../eforms/1.11/index.html">1.11.0</a>
            </li>
            <li class="version">
              <a href="../../eforms/1.10/index.html">1.10</a>
            </li>
            <li class="version">
              <a href="../../eforms/1.9/index.html">1.9</a>
            </li>
            <li class="version">
              <a href="../../eforms/1.8/index.html">1.8</a>
            </li>
            <li class="version">
              <a href="../../eforms/1.7/index.html">1.7</a>
            </li>
            <li class="version">
              <a href="../../eforms/1.6/index.html">1.6</a>
            </li>
            <li class="version">
              <a href="../../eforms/1.5/index.html">1.5</a>
            </li>
            <li class="version">
              <a href="../../eforms/1.4/index.html">1.4</a>
            </li>
        </ul>
      </li>
      <li class="component">
        <a class="title" href="../../EPO/latest/index.html">eProcurement Ontology</a>
        <ul class="versions">
            <li class="version">
              <a href="../../EPO/4.2/index.html">4.2.0-rc.1</a>
            </li>
            <li class="version is-latest">
              <a href="../../EPO/latest/index.html">4.1.0</a>
            </li>
            <li class="version">
              <a href="../../EPO/4/index.html">4.0.0</a>
            </li>
            <li class="version">
              <a href="../../EPO/3.1/index.html">3.1.0</a>
            </li>
            <li class="version">
              <a href="../../EPO/3.0.1/index.html">3.0.1</a>
            </li>
            <li class="version">
              <a href="../../EPO/2.0.1/index.html">2.0.1</a>
            </li>
            <li class="version">
              <a href="../../EPO/2.0.0/index.html">2.0.0</a>
            </li>
            <li class="version">
              <a href="../../EPO/1.0.0/index.html">1.0.0</a>
            </li>
        </ul>
      </li>
      <li class="component">
        <a class="title" href="../../ESPD-EDM/latest/index.html">ESPD EDM</a>
        <ul class="versions">
            <li class="version is-latest">
              <a href="../../ESPD-EDM/latest/index.html">4.0.0</a>
            </li>
            <li class="version">
              <a href="../../ESPD-EDM/3.3.0/index.html">3.3.0</a>
            </li>
            <li class="version">
              <a href="../../ESPD-EDM/3.2.0/index.html">3.2.0</a>
            </li>
            <li class="version">
              <a href="../../ESPD-EDM/3.1.0/index.html">3.1.0</a>
            </li>
            <li class="version">
              <a href="../../ESPD-EDM/3.0.1/index.html">3.0.1</a>
            </li>
            <li class="version">
              <a href="../../ESPD-EDM/2.1.1/index.html">2.1.1</a>
            </li>
            <li class="version">
              <a href="../../ESPD-EDM/2.0.2/index.html">2.0.2</a>
            </li>
            <li class="version">
              <a href="../../ESPD-EDM/1.0.2/index.html">1.0.2</a>
            </li>
        </ul>
      </li>
      <li class="component">
        <a class="title" href="../../api/latest/index.html">TED API</a>
        <ul class="versions">
            <li class="version">
              <a href="../../api/3.0/index.html">3.0-rc.1</a>
            </li>
            <li class="version is-latest">
              <a href="../../api/latest/index.html">2.0</a>
            </li>
        </ul>
      </li>
  </ul>
</div>    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../home/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">TED Open Data Service</a></li>
    <li><a href="sparql_queries.html">SPARQL Queries using the SPARQL EndPoint</a></li>
  </ul>
</nav>
</div>
  <div class="content">
    <aside class="toc sidebar" data-title="Contents" data-levels="6">
  <div class="toc-menu"></div>
</aside>
    <article class="doc">
<h1 class="page">SPARQL Queries using the SPARQL EndPoint</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>A query is submitted to the SPARQL EndPoint by replacing the text highlighted below in blue in the Query text box below with your own query:</p>
</div>
<div class="imageblock unresolved">
<div class="content">
<img src="sparql.png" alt="SPARQL End Point">
</div>
<div class="title">Figure 1. End point user interface</div>
</div>
<div class="paragraph">
<p>The format of the result can be changed using the drop-down box of the Results format.</p>
</div>
<div class="paragraph">
<p>Once the query is in place, and the Results format chosen, the query can be run by pressing “Run Query”.</p>
</div>
<div class="paragraph">
<p>Below are some examples of SPARQL queries that you can try out yourself in the <a href="https://publications.europa.eu/webapi/rdf/sparql">SPARQL Endpoint</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_query_how_many_contract_awards_count_published_on_the_5_september_2023_were_to_german_smes_suppliers"><a class="anchor" href="#_query_how_many_contract_awards_count_published_on_the_5_september_2023_were_to_german_smes_suppliers"></a>Query: How many contract awards (count), published on the 5 September 2023, were to German SMEs (suppliers)?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>(date and country chosen randomly)</p>
</div>
<div class="paragraph">
<p>This SPARQL query counts the number of distinct procurement notices that meet specific criteria related to publication date, country code (Germany), and business size (SME).</p>
</div>
<div class="paragraph">
<p>The query retrieves:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The number of distinct procurement notices. (Using "DISTINCT" in the query SELECT statement eliminates duplicate results)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The notice publication date, organization country and organization size can be changed to create other queries. To do this you can change values in the following section:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>VALUES (?NoticePublicationDate ?CountryCode ?BusinessSize) {
        (
        "20230905"
        &lt;http://publications.europa.eu/resource/authority/country/DEU&gt;
        &lt;http://publications.europa.eu/resource/authority/economic-operator-size/sme&gt;
        )</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>The value for publication date:</p>
<div class="literalblock">
<div class="content">
<pre>"20230905"</pre>
</div>
</div>
</li>
<li>
<p>The value (code) for organization country:</p>
<div class="literalblock">
<div class="content">
<pre>&lt;http://publications.europa.eu/resource/authority/country/DEU&gt;</pre>
</div>
</div>
</li>
<li>
<p>The value for organization size:</p>
<div class="literalblock">
<div class="content">
<pre>&lt;http://publications.europa.eu/resource/authority/economic-operator-size/sme&gt;</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_query_text"><a class="anchor" href="#_query_text"></a>Query text:</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sparql hljs" data-lang="sparql">PREFIX epo: &lt;http://data.europa.eu/a4g/ontology#&gt;
PREFIX cccev: &lt;http://data.europa.eu/m8g/&gt;
SELECT
(COUNT(DISTINCT ?Notice) as ?NrOfNotices)
WHERE {
    VALUES (?NoticePublicationDate ?CountryCode ?BusinessSize) {
            (
            "20230905"
            &lt;http://publications.europa.eu/resource/authority/country/DEU&gt;
            &lt;http://publications.europa.eu/resource/authority/economic-operator-size/sme&gt;
            )
    }
    ?Notice epo:hasPublicationDate ?NoticePublicationDate .
    ?Notice epo:announcesRole ?Buyer .
    ?Buyer epo:playedBy ?Organization .
    ?Organization epo:hasBusinessSize ?BusinessSize .
    ?Organization cccev:registeredAddress / epo:hasCountryCode ?CountryCode .
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_query_which_notices_were_published_by_buyers_from_germany_on_5_september_2023"><a class="anchor" href="#_query_which_notices_were_published_by_buyers_from_germany_on_5_september_2023"></a>Query:  Which notices were published by buyers from Germany on 5 September 2023?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>(date and country chosen randomly)</p>
</div>
<div class="paragraph">
<p>This SPARQL query retrieves the contract award notices published on TED on 05-09-2023 by German buyers.</p>
</div>
<div class="paragraph">
<p>The query retrieves:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The ID of the resource which contains the Notice ID</p>
</li>
<li>
<p>The URI of the organisation within the notice</p>
</li>
<li>
<p>The name of the buyer.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It does so by specifying a set of values and then querying the RDF data based on those values. The query returns information about the notices, the organizations (buyers), and their legal names.</p>
</div>
<div class="paragraph">
<p>The publication date and organization country can be changed to create other queries. To do this, change the following section:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>VALUES (?PublicationDate ?countryCode) {
        ("20230905" &lt;http://publications.europa.eu/resource/authority/country/DEU&gt;)
}</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>The value for publication date in example above:</p>
<div class="literalblock">
<div class="content">
<pre>"20230905"</pre>
</div>
</div>
</li>
<li>
<p>The value for organization country in example above:</p>
<div class="literalblock">
<div class="content">
<pre>&lt;http://publications.europa.eu/resource/authority/country/DEU&gt;</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_query_text_2"><a class="anchor" href="#_query_text_2"></a>Query text:</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sparql hljs" data-lang="sparql">PREFIX epo: &lt;http://data.europa.eu/a4g/ontology#&gt;
PREFIX cccev: &lt;http://data.europa.eu/m8g/&gt;
PREFIX org: &lt;http://www.w3.org/ns/org#&gt;
SELECT DISTINCT
?Notice
?Organization
?LegalName
WHERE {
    VALUES (?PublicationDate ?countryCode) {
            ("20230905" &lt;http://publications.europa.eu/resource/authority/country/DEU&gt;)
    }
    ?Notice epo:hasPublicationDate ?PublicationDate .
    ?Notice epo:announcesRole ?Buyer .
    ?Buyer epo:playedBy ?Organization .
    ?Organization cccev:registeredAddress / epo:hasCountryCode ?countryCode .
    ?Organization epo:hasLegalName ?LegalName .
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_query_list_all_contract_winners_published_on_the_31_august_2023"><a class="anchor" href="#_query_list_all_contract_winners_published_on_the_31_august_2023"></a>Query: List all contract winners published on the 31 August 2023</h2>
<div class="sectionbody">
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>This SPARQL query retrieves information about the winners of procurement lots for a specific date ("20230921" or 21-09-2023). It does so by specifying a value for the publication date, and then querying the RDF data based on that value. The query returns information about the lots, the organizations that won them, and details about the awarded amounts and currencies.</p>
</div>
<div class="paragraph">
<p>The query retrieves:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Notice ID</p>
</li>
<li>
<p>Procedure ID</p>
</li>
<li>
<p>Notice publication date</p>
</li>
<li>
<p>Lot Number (optional, may be missing if it is not specified in the notice)</p>
</li>
<li>
<p>The legal name of the winner</p>
</li>
<li>
<p>The winners country code as URI</p>
</li>
<li>
<p>Lot value awarded to winner</p>
</li>
<li>
<p>The currency of the awarded value</p>
</li>
<li>
<p>Lot URI</p>
</li>
<li>
<p>Notice URI</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The notice publication date and winner legal name language can be changed to create other queries. To do this, change the following section:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>VALUES ?NoticePublicationDate {
    "20230831"
}
FILTER(LANG(?WinnerLegalName) = 'en')</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>The value for publication date in example above:</p>
<div class="literalblock">
<div class="content">
<pre>"20230831"</pre>
</div>
</div>
</li>
<li>
<p>The value for winner legal name language in example above:</p>
<div class="literalblock">
<div class="content">
<pre>'en'</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_query_text_3"><a class="anchor" href="#_query_text_3"></a>Query text:</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sparql hljs" data-lang="sparql">PREFIX epo: &lt;http://data.europa.eu/a4g/ontology#&gt;
PREFIX org: &lt;http://www.w3.org/ns/org#&gt;
PREFIX cccev: &lt;http://data.europa.eu/m8g/&gt;
SELECT DISTINCT
?NoticeID
?NoticePublicationDate
?ProcedureNr
?LotNr
?WinnerLegalName
?WinnerCountryCode
?LotAwardedValue
?LotAwardedValueCurrency
?LotURI
?NoticeURI
WHERE {
    VALUES ?NoticePublicationDate {
        "20230831"
    }
    FILTER(LANG(?WinnerLegalName) = 'en')
    ?NoticeURI a epo:ResultNotice;
               epo:hasPublicationDate ?NoticePublicationDate;
               epo:hasID / epo:hasIdentifierValue ?NoticeID ;
                           epo:refersToLot ?LotURI.
    ?LotURI a epo:Lot.
    ?LotAwardOutcome epo:describesLot ?LotURI;
                     a epo:LotAwardOutcome;
                     epo:hasAwardedValue ?LotAwardedValueURI ;
                     epo:comprisesTenderAwardOutcome ?TenderAwardOutcome.
    ?TenderAwardOutcome a epo:TenderAwardOutcome;
                        epo:indicatesAwardOfLotToWinner / epo:playedBy ?Winner.
    ?Winner a org:Organization;
            epo:hasLegalName ?WinnerLegalName .
    OPTIONAL {
        ?Winner cccev:registeredAddress / epo:hasCountryCode ?WinnerCountryCode.
    }
    ?LotAwardedValueURI a epo:MonetaryValue;
                        epo:hasAmountValue ?LotAwardedValue;
                        epo:hasCurrency ?LotAwardedValueCurrency.
    OPTIONAL {
        ?LotURI epo:hasID / epo:hasIdentifierValue ?LotNr .
    }
    ?ProcedureURI epo:hasProcurementScopeDividedIntoLot ?LotURI;
                  a epo:Procedure ;
                  epo:hasID / epo:hasIdentifierValue ?ProcedureNr .
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_query_return_the_highest_value_contract_awarded_on_the_23_september_2023"><a class="anchor" href="#_query_return_the_highest_value_contract_awarded_on_the_23_september_2023"></a>Query: Return the highest value contract awarded on the 23 September 2023.</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This query lists the contract values for contract awards published on this date, orders the results by value descending, and limit the results to one row (which is the highest value contract due to the order).
&#160;</p>
</div>
<div class="paragraph">
<p>This SPARQL query returns the procurement notice, its publication date, the corresponding lot, and the highest awarded amount along with the currency code for a specific date ("20230905" or 05-09-2023). It does so by specifying a value for the date and then querying the RDF data based on that value. The query returns the information in descending order of the awarded amount, limiting the results to one row, with the effect that only the highest value is displayed.</p>
</div>
<div class="paragraph">
<p>The query retrieves:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Lot URI</p>
</li>
<li>
<p>The legal name of the winner</p>
</li>
<li>
<p>The winners country code as URI</p>
</li>
<li>
<p>Lot value awarded to winner</p>
</li>
<li>
<p>The currency of the awarded value</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The notice publication date and winner legal name language can be changed to create other queries. To do this, change the following section:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>VALUES ?NoticePublicationDate {
    "20230921"
}
FILTER(LANG(?WinnerLegalName) = 'en')</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Existing value for publication date in example above:</p>
<div class="literalblock">
<div class="content">
<pre>"20230921"</pre>
</div>
</div>
</li>
<li>
<p>Existing value for winner legal name language in example above:</p>
<div class="literalblock">
<div class="content">
<pre>'en'</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_query_text_4"><a class="anchor" href="#_query_text_4"></a>Query text:</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sparql hljs" data-lang="sparql">PREFIX epo: &lt;http://data.europa.eu/a4g/ontology#&gt;
PREFIX org: &lt;http://www.w3.org/ns/org#&gt;
PREFIX cccev: &lt;http://data.europa.eu/m8g/&gt;
SELECT
?LotURI
?WinnerLegalName
?WinnerCountryCode
?LotAwardedValue
?LotAwardedValueCurrency
WHERE {
    VALUES ?NoticePublicationDate {
        "20230921"
    }
    FILTER(LANG(?WinnerLegalName) = 'en')
    ?Notice epo:hasPublicationDate ?NoticePublicationDate ;
            epo:refersToLot ?LotURI .
    ?LotAwardOutcome epo:describesLot ?LotURI ;
                     epo:hasAwardedValue ?MonetaryValue ;
                     epo:comprisesTenderAwardOutcome ?TenderAwardOutcome.
    ?TenderAwardOutcome a epo:TenderAwardOutcome;
                        epo:indicatesAwardOfLotToWinner / epo:playedBy ?Winner.
    ?Winner a org:Organization;
            epo:hasLegalName ?WinnerLegalName .
    OPTIONAL {
        ?Winner cccev:registeredAddress / epo:hasCountryCode ?WinnerCountryCode.
    }
    ?MonetaryValue a epo:MonetaryValue;
                   epo:hasAmountValue ?LotAwardedValue;
                   epo:hasCurrency ?LotAwardedValueCurrency .
}
ORDER BY DESC(?LotAwardedValue)
LIMIT 1</code></pre>
</div>
</div>
<hr>
<div class="paragraph">
<p>Any comments on the documentation?</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/OP-TED/ted-rdf-docs/issues/new/choose">Click here to let us know</a></p>
</div>
</div>
</div>
</div>
</article>
    <div id="widgetContainer">
      <article class="widget">
<div class="widget-title">
    <p>Access other sites in the TED family</p>
  </div>
  <div class="links">
    <a href="https://enotices2.ted.europa.eu/" target="_blank">eNotices2</a>
    <a href="https://developer.ted.europa.eu/" target="_blank">TED Developer Portal</a>
    <a href="https://ted.europa.eu/" target="_blank">TED Website</a>
  </div>
</article>
    </div>
  </div>
</main>

<script>
  // Get the current URL
  var url = window.location.href;

  // Check if the URL ends with 'home/index.html'
  if (!url.endsWith('/home/index.html')) {
    // If it doesn't, hide the widget
    document.getElementById('widgetContainer').style.display = 'none';
  }
</script></div>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/docsearch-2.6.3.js"></script>
<script src="../../_/js/vendor/search-algolia.js" id="search-script" data-api-key="7bd6f4bbe2cb3188cd99f1625cb00f75" data-api-id="BE8MR7O2G7" data-index-name="ted-docs-idx"></script>
<style type="text/css">
    @import url('/documents/d/global/custom');
</style>

<div class="footer">
    <div class="three-columns">

        <div class="col-md-12 col-lg-4">
            <div class="ls-footer-logo-DD"><a href="https://docs.ted.europa.eu/home/index.html"><img
                        alt="TED Developer Docs" class="ls-op" src="../../_/img/ted-logo-footer2.png"
                        height="48" /></a></div>
            <span class="ted-footer__title ted-footer__title--main"></span>
            <div class="ted-footer__rich-text">
                <p>This website is managed by:
                    <u>
                        <a href="https://op.europa.eu/en/home" target="_blank">Publications Office of the European
                            Union</a>
                    </u>
                </p>

            </div>
        </div>

        <div class="col-md-12 col-lg-4">

            <h3 class="ted-footer__title">Need Help?</h3>
            <ul class="ul-footer">
                <li class="li-footer"><a href="https://ted.europa.eu/en/help-page">Help</a></li>
                <li class="li-footer"><a href="https://ted.europa.eu/en/contact">Contact the TED Helpdesk</a></li>
            </ul>

            <h3 class="ted-footer__title">Follow us</h3>
            <ul class="ul-footer">
                <li class="li-footer">
                    <a href="https://twitter.com/EUTenders"> <img src="../../_/img/twitter.svg"
                            class="icon-footer" /><span>X/Twitter</span></a>
                    <a href="https://www.youtube.com/playlist?list=PLT5rARDev_rkQdFimoHlpv2Och1H0uBLs"><img
                            src="../../_/img/youtube.svg" class="icon-footer-2nd" /><span>YouTube</span></a>
                </li>
            </ul>

            <h3 class="ted-footer__title">Legal</h3>
            <ul class="ul-footer">
                <li class="li-footer"><a href="https://ted.europa.eu/en/legal-notice" target="_blank">Legal Notice</a>
                </li>
                <li class="li-footer"><a href="https://ted.europa.eu/en/cookie-choice" target="_blank">Cookies</a>
                </li>
                <li class="li-footer"><a
                        href="https://ted.europa.eu/en/accessibility"
                        target="_blank">Accessibility</a>
                </li>
            </ul>

        </div>

        <div class="col-md-12 col-lg-4">

            <h3 class="ted-footer__title">About us</h3>
            <ul class="ul-footer">
                <li class="li-footer"><a href="https://ted.europa.eu/">About TED</a></li>
            </ul>

            <h3 class="ted-footer__title">Other services</h3>
            <ul class="ul-footer">
                <li class="li-footer"><a href="https://ted.europa.eu/TED/main/HomePage.do">EU tenders</a></li>
                <li class="li-footer"><a href="https://data.europa.eu/en">European data</a></li>
                <li class="li-footer"><a href="https://op.europa.eu/en/web/eu-vocabularies">EU vocabularies</a></li>
                <li class="li-footer"><a href="https://cordis.europa.eu/">EU research results</a></li>
                <li class="li-footer"><a href="https://op.europa.eu/en/web/who-is-who">EU Whoiswho</a></li>
                <li class="li-footer"><a href="/web/librarians-corner">EU publications</a></li>
            </ul>
        </div>
    </div>

    <div class="three-columns">
        <div class="col-md-12 col-lg-4">
            <!--<h2 class="sr-only" id="section-title-op">Publications Office of the European Union</h2> -->

            <div class="ls-footer-logo"><a aria-labelledby="section-title-op" href="/"><img alt="European Union"
                        class="ls-op" /></a></div>
            <span class="ted-footer__title ted-footer__title--main"></span>
           
            <div class="ted-footer__rich-text">
                <p class="byline-footer">Discover more on <a class="ls-underline" href="https://europa.eu/en/home"><span
                            style="word-break: keep-all; white-space: nowrap; text-decoration: underline!important">europa.eu</span></a>
                </p>

            </div>
        </div>
        <div class="col-md-12 col-lg-4">
            <h3 class="ted-footer__title">Contact the EU</h3>

            <ul class="ul-footer">
                <li class="li-footer"><a href="tel:0080067891011">Call us 00 800 6 7 8 9 10 11</a></li>
                <li class="li-footer"><a href="https://european-union.europa.eu/contact-eu/call-us_en">Use other
                        Telephone options</a></li>
                <li class="li-footer"><a href="https://european-union.europa.eu/contact-eu/write-us_en">Write to us via
                        our contact forms</a></li>
                <li class="li-footer"><a href="https://european-union.europa.eu/contact-eu/meet-us_en">Meet us at one of
                        the EU centres</a></li>

            </ul>

            <h3 class="ted-footer__title">Social Media</h3>
            <ul class="ul-footer">
                <li class="li-footer"><a
                        href="https://european-union.europa.eu/contact-eu/social-media-channels_en#/search"><i
                            aria-hidden="true" class="gs-icon-twitter"></i>Search of EU social media channels</a></li>

            </ul>

            <h3 class="ted-footer__title">Legal</h3>

            <ul class="ul-footer">
                <li class="li-footer"><a aria-labelledby="section-title-op"
                        href="https://european-union.europa.eu/languages-our-websites_en">Languages on our website</a>
                </li>
                <li class="li-footer"><a aria-labelledby="section-title-op"
                        href="https://european-union.europa.eu/privacy-policy-european-union-website_en">Privacy
                        Policy</a></li>
                <li class="li-footer"><a aria-labelledby="section-title-op"
                        href="https://european-union.europa.eu/legal-notice_en">Legal notice</a></li>
                <li class="li-footer"><a aria-labelledby="section-title-op"
                        href="https://european-union.europa.eu/cookies_en">Cookies</a></li>
            </ul>
        </div>
        <div class="col-md-12 col-lg-4">
            <h3 class="ted-footer__title">EU institutions</h3>

            <ul class="ul-footer">
                <li class="li-footer institutions"><a href="https://www.europarl.europa.eu/portal/en">European Parliament</a></li>
                <li class="li-footer institutions"><a href="https://www.consilium.europa.eu/en/european-council/">European
                        Council</a></li>
                <li class="li-footer institutions"><a href="https://www.consilium.europa.eu/en/">Council of the European Union</a>
                </li>
                <li class="li-footer institutions"><a href="https://commission.europa.eu/index_en">European Commission</a></li>
                <li class="li-footer institutions"><a href="https://curia.europa.eu/jcms/jcms/j_6/en/">Court of Justice of the
                        European Union (CJEU)</a></li>
                <li class="li-footer institutions"><a href="https://www.ecb.europa.eu/home/html/index.en.html">European Central Bank
                        (ECB)</a></li>
                <li class="li-footer institutions"><a href="http://www.eca.europa.eu/en">European Court of Auditors (ECA)</a></li>
                <li class="li-footer institutions"><a href="https://www.eeas.europa.eu/_en">European External Action Services
                        (EEAS)</a></li>
                <li class="li-footer institutions"><a href="https://www.eesc.europa.eu/en">European Economic and Social Committee
                        (EESC)</a></li>
                <li class="li-footer institutions"><a href="https://cor.europa.eu/en/">European Committee of the Regions (CoR)</a>
                </li>
                <li class="li-footer institutions"><a href="https://www.eib.org/en/index.htm">European Investment Bank (EIB)</a></li>
                <li class="li-footer institutions"><a href="https://www.ombudsman.europa.eu/en/home">European Ombudsman</a></li>
                <li class="li-footer institutions"><a href="https://edps.europa.eu/_en?lang=en">European Data Protection Supervisor
                        (EDPS)</a></li>
                <li class="li-footer institutions"><a href="https://edpb.europa.eu/edpb_en">European Data protection Board</a></li>
                <li class="li-footer institutions"><a href="https://eu-careers.europa.eu/en">European Personnel Selection Office</a>
                </li>
                <li class="li-footer institutions"><a href="https://op.europa.eu/en/home">Publications Office of the European
                        Union</a></li>
                <li class="li-footer institutions"><a
                        href="https://european-union.europa.eu/institutions-law-budget/institutions-and-bodies/search-all-eu-institutions-and-bodies_en?f%5B0%5D=oe_organisation_eu_type%3Ahttp%3A//publications.europa.eu/resource/authority/corporate-body-classification/AGENCY_DEC&f%5B1%5D=oe_organisation_eu_type%3Ahttp%3A//publications.europa.eu/resource/authority/corporate-body-classification/AGENCY_EXEC&f%5B2%5D=oe_organisation_eu_type%3Ahttp%3A//publications.europa.eu/resource/authority/corporate-body-classification/EU_JU">Agencies</a>
                </li>
                <li class="li-footer search-institutions"><a href="https://european-union.europa.eu/institutions-law-budget/institutions-and-bodies/search-all-eu-institutions-and-bodies_en">Search for EU institutions</a></li>
            </ul>
        </div>

        <script>
            ECL.autoInit();
        </script>
    </div>
</div>  </body>
</html>
